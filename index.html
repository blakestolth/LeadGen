<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    
  <title>Vancouver Island Credit | Auto Approvals Online</title>

  <meta name="description" content="Fast, confidential auto approvals across Vancouver Island & BC. New & used options. Delivery to your door. Work 1 on 1 with Blake Stolth." />
  <meta name="theme-color" content="#2A5D9F"/>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>

  <style>
    :root{
      /* COLORS */
      --blue-600:#2A5D9F; 
      --blue-700:#214B80; 
      --blue-100:#EAF1FB; 
      --red-equifax: #A8202A;
      --slate-50: #f8fafc;
      --slate-100: #f1f5f9;
      --slate-200: #e2e8f0;
      --slate-300: #cbd5e1;
      --slate-400: #94a3b8;
      --slate-500: #64748b;
      --slate-600: #475569;
      --slate-700: #334155;
      --slate-800: #1e293b;

      /* Typography & Spacing */
      --radius: 8px;
      --control-h: 44px;
      --field-gap: 8px; 
    }

    body{
      font-family:'Work Sans',sans-serif;
      background: var(--slate-100);
      color: var(--slate-700);
      overflow-x: hidden;
    }
    
    /* --- TYPOGRAPHY --- */
    .h1{ font-size:26px; font-weight:800; color:var(--slate-800); line-height: 1.1; letter-spacing: -0.5px; }
    .h2{ font-size:18px; font-weight:700; color:var(--slate-800); margin-bottom:4px; }
    .label{ font-size:11px; color:var(--slate-700); font-weight:600; display:block; margin-bottom:4px; text-transform: uppercase; letter-spacing: 0.02em; text-align: center; }
    
    /* --- CARDS --- */
    .card{ background:#fff; border-radius:12px; border:1px solid var(--slate-200); box-shadow:0 4px 6px -1px rgb(0 0 0 / 0.05); }
    .card-accent{ border: 1px solid var(--slate-300); background: #fff; }

    /* --- INPUTS --- */
    .form-input,.form-select{
      background: var(--slate-50); color:var(--slate-800); border:1px solid var(--slate-300);
      font-size:13px; width:100%; padding: 0 12px; border-radius: var(--radius); 
      height: var(--control-h); line-height: var(--control-h); font-weight: 500; display: block;
    }
    .form-input:focus,.form-select:focus{ background:#fff; border-color:var(--blue-600); outline:none; ring: 2px solid rgba(42,93,159,0.1); }
    
    .cta-button{ background:var(--blue-600); color:#fff; font-weight:700; padding:0 1.2rem; border-radius: var(--radius); font-size:13px; height:42px; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; border: none; transition: transform 0.1s; }
    .cta-button:active{ transform: scale(0.98); }

    /* --- FORM LAYOUT ENGINE (FIXED) --- */
    .form-shell { 
        position: relative; 
        display: flex; 
        flex-direction: column; 
        height: 380px; 
        background: #fff;
        overflow: hidden;
        /* This ensures the footer stays at the bottom */
        justify-content: space-between;
    }

    /* 1. HEADER */
    .form-header { 
        flex-shrink: 0; 
        height: 50px; 
        background: #fff; 
        border-bottom: 1px solid var(--slate-200); 
        padding: 0 20px; 
        display: flex; 
        flex-direction: column; 
        justify-content: center;
    }

    /* 2. BODY (Scrollable Middle) */
    .step-viewport { 
        flex-grow: 1; 
        position: relative; 
        overflow-y: auto; 
        overflow-x: hidden;
        display: flex;
        flex-direction: column;
    }
    .step-viewport-inner { flex-grow: 1; height: 100%; }
    #the-form { height: 100%; }

    /* 3. STEP CONTAINER */
    .form-step { height: 100%; width: 100%; }
    .step-inner {
        height: 100%;
        display: flex; 
        flex-direction: column;
        padding: 10px 20px;
    }
    
    /* 4. CONTENT ALIGNMENT */
    .step-title { text-align: center; flex-shrink: 0; margin-bottom: 10px; }
    .step-body {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: center; /* Vertically Center Content */
        align-items: center;
        width: 100%;
    }
    .content { width: 100%; max-width: 450px; }

    /* 5. FOOTER (Pinned Bottom) */
    .form-footer {
        flex-shrink: 0;
        height: 60px; /* Slightly taller for easier clicking */
        background: #fff;
        border-top: 1px solid var(--slate-200);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
        z-index: 20;
    }

    /* --- MODAL FOCUS MODE (FIXED) --- */
    .form-backdrop {
        position: fixed; inset: 0; background: rgba(15, 23, 42, 0.4); backdrop-filter: blur(6px);
        opacity: 0; pointer-events: none; transition: opacity 0.3s ease; z-index: 40;
    }
    .form-backdrop.active { opacity: 1; pointer-events: auto; }

    .form-focused {
        position: fixed !important;
        top: 50% !important; left: 50% !important;
        transform: translate(-50%, -50%) !important;
        width: 95vw !important; max-width: 500px !important;
        height: 550px !important; max-height: 90vh !important;
        z-index: 50 !important;
        border-radius: 16px;
        box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
        margin: 0 !important;
    }

    /* NICE CLOSE BUTTON */
    .form-close-btn {
        position: absolute; top: 12px; right: 12px;
        width: 36px; height: 36px;
        background: #f1f5f9; border-radius: 8px;
        display: flex; align-items: center; justify-content: center;
        cursor: pointer; color: #64748b; border: 1px solid #e2e8f0;
        z-index: 60; transition: all 0.2s;
    }
    .form-close-btn:hover { background: #e2e8f0; color: #0f172a; }

    /* --- UTILITIES --- */
    .track{ height:4px; background:var(--slate-200); border-radius:99px; overflow:hidden; }
    .fill{ height:100%; background:var(--blue-600); width:0%; transition:width .3s; }
    
    .choice-rect {
      width:100%; text-align:left; border:1.5px solid var(--slate-300); border-radius:8px; background:#fff;
      font-weight:600; color: var(--slate-700); display:flex; align-items:center; justify-content: center; cursor:pointer; 
      min-height: 50px; padding: 0 16px; transition: all 0.1s;
    }
    .choice-rect:hover{ border-color:var(--blue-600); background: #f8fafc; }
    .choice-rect.selected{ border-color:var(--blue-600); background:var(--blue-100); color: var(--blue-700); }
    
    .hidden { display: none !important; }
    .err { border-color: var(--red-equifax) !important; background: #fff5f5; }
    
    /* Grid Helpers */
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    .vstack > * + * { margin-top: 10px; }

  </style>
</head>
<body>

  <div id="main-content">
    <header class="w-full max-w-5xl mx-auto mt-4 px-4">
      <nav class="bg-white/90 backdrop-blur-lg card card-accent px-6 py-4 flex flex-wrap items-center justify-between gap-4">
        <div class="flex items-center gap-4">
            <img src="Logo.png" alt="Logo" class="h-12 w-auto object-contain"/>
            <div>
                <div class="font-extrabold text-slate-800 text-sm leading-none">Vancouver Island Credit</div>
                <div class="text-[10px] text-slate-500 font-bold mt-1">Powered by Equifax</div>
            </div>
        </div>
        <div class="flex items-center gap-4">
            <a href="tel:+12369692424" class="font-bold text-slate-800 text-xs hidden sm:block">(236) 969-2424</a>
            <button id="navApplyBtn" class="cta-button text-xs shadow-md">Get Started</button>
        </div>
      </nav>
    </header>

    <main class="w-full max-w-5xl mx-auto px-4 py-4 space-y-4">
      
      <section class="card card-accent p-5">
        <div class="flex items-center gap-4 mb-4">
            <img src="Untitled Project.jpg" alt="Blake" class="w-12 h-12 rounded-full border-2 border-blue-600 object-cover"/>
            <div>
                <h1 class="h1 text-lg">See options in 3 Steps</h1>
                <p class="text-xs text-slate-500 font-medium">Personally reviewed by Blake</p>
            </div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm">
            <div class="bg-slate-50 p-3 rounded border border-slate-200"><b>1. Enter info</b> (2 mins)</div>
            <div class="bg-slate-50 p-3 rounded border border-slate-200"><b>2. See options</b> you qualify for</div>
            <div class="bg-slate-50 p-3 rounded border border-slate-200"><b>3. Delivery</b> to your door</div>
        </div>
      </section>

      <section class="grid grid-cols-1 md:grid-cols-2 gap-4">
        
        <div class="card card-accent p-0 overflow-hidden h-auto" id="lead-form-card">
          <div id="form-spacer" class="hidden h-[380px]"></div>
          
          <div class="form-shell" id="form-shell">
            
            <button id="form-close" class="form-close-btn hidden" aria-label="Close form">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>

            <div id="form-trigger" class="absolute inset-0 z-30 cursor-pointer"></div>

            <div class="form-header">
              <div class="flex items-center justify-between mb-1.5">
                <div id="progress-label" class="text-[10px] uppercase tracking-wider font-bold text-slate-500">Step 1</div>
                <div id="progress-endcap" class="text-[10px] font-bold text-blue-700">Start</div>
              </div>
              <div class="track"><div id="progress-fill" class="fill"></div></div>
            </div>

            <div id="step-viewport" class="step-viewport">
              <div class="step-viewport-inner">
                <form id="the-form" novalidate>
                  
                  <section class="form-step" data-id="step-intent">
                    <div class="step-inner">
                      <div class="step-title"><h3 class="h2">Select Goal</h3></div>
                      <div class="step-body">
                        <div class="content grid-2">
                          <button type="button" class="choice-rect" data-intent="finance">Finance</button>
                          <button type="button" class="choice-rect" data-intent="refinance">Refinance</button>
                        </div>
                        <input type="hidden" id="intent" value="finance">
                      </div>
                    </div>
                  </section>
                  
                  <section class="form-step hidden" data-id="step-vehicle-type">
                    <div class="step-inner">
                      <div class="step-title"><h3 class="h2">Vehicle Type</h3></div>
                      <div class="step-body">
                        <div class="content grid-2">
                          <button type="button" class="choice-rect" data-type="Car">Car</button>
                          <button type="button" class="choice-rect" data-type="SUV">SUV</button>
                          <button type="button" class="choice-rect" data-type="Truck">Truck</button>
                          <button type="button" class="choice-rect" data-type="Van">Van</button>
                        </div>
                        <input type="hidden" id="vehicleType">
                      </div>
                    </div>
                  </section>

                  <section class="form-step hidden" data-id="step-budget">
                    <div class="step-inner">
                      <div class="step-title"><h3 class="h2">Target Budget</h3></div>
                      <div class="step-body">
                        <div class="content">
                          <input id="biWeeklyRange" type="range" min="120" max="600" step="10" value="250" class="w-full cursor-pointer accent-blue-600">
                          <div class="text-sm text-slate-800 mt-4 text-center font-medium">
                             Selected: <b>$<span id="biWeeklyOut">250</span></b> / bi-weekly
                          </div>
                          <input type="hidden" id="budgetRange" value="$250 bi-weekly">
                        </div>
                      </div>
                    </div>
                  </section>

                  <section class="form-step hidden" data-id="step-purchase">
                    <div class="step-inner">
                      <div class="step-title"><h3 class="h2">Purchase Details</h3></div>
                      <div class="step-body">
                        <div class="content vstack">
                          <div>
                            <label class="label">Down Payment</label>
                            <select id="downPayment" class="form-select">
                              <option value="">Select amount…</option>
                              <option value="$0–$1,000">$0 – $1,000</option>
                              <option value="$1,000–$3,000">$1,000 – $3,000</option>
                              <option value="$3,000+">$3,000+</option>
                            </select>
                          </div>
                          <div>
                            <label class="label">Trade-in?</label>
                            <div class="grid-2">
                              <button type="button" class="choice-rect" data-trade="No">No</button>
                              <button type="button" class="choice-rect" data-trade="Yes">Yes</button>
                            </div>
                            <input type="hidden" id="hasTradeIn" value="No">
                          </div>
                        </div>
                      </div>
                    </div>
                  </section>
                  
                  <section class="form-step hidden" data-id="step-income">
                    <div class="step-inner">
                        <div class="step-title"><h3 class="h2">Income Details</h3></div>
                        <div class="step-body">
                            <div class="content vstack">
                                <div><label class="label">Employment</label><select class="form-select" id="empType" required><option value="">Select...</option><option>Full-Time</option><option>Part-Time</option><option>Self-Employed</option></select></div>
                                <div><label class="label">Monthly Income (Gross)</label><input class="form-input" type="tel" placeholder="$4000" required></div>
                            </div>
                        </div>
                    </div>
                  </section>

                  <section class="form-step hidden" data-id="step-yourinfo">
                    <div class="step-inner">
                        <div class="step-title"><h3 class="h2">Contact Info</h3></div>
                        <div class="step-body">
                            <div class="content vstack">
                                <div class="grid-2">
                                    <div><label class="label">First Name</label><input class="form-input" type="text" required></div>
                                    <div><label class="label">Last Name</label><input class="form-input" type="text" required></div>
                                </div>
                                <div><label class="label">Email</label><input class="form-input" type="email" required></div>
                                <div><label class="label">Phone</label><input class="form-input" type="tel" id="phone" required></div>
                            </div>
                        </div>
                    </div>
                  </section>
                  
                  <section class="form-step hidden" data-id="step-consent">
                     <div class="step-inner">
                         <div class="step-body">
                             <h3 class="h2">All set!</h3>
                             <p class="text-sm text-slate-500">Submitting...</p>
                         </div>
                     </div>
                  </section>

                </form>
              </div>
            </div>

            <div class="form-footer" id="form-footer">
              <button type="button" id="btnBack" class="font-bold text-slate-500 hover:text-slate-800 text-xs uppercase tracking-wide px-2">Back</button>
              <button type="button" id="btnNext" class="cta-button shadow-md">Next Step</button>
            </div>

          </div>
        </div>
        
        <aside class="flex flex-col">
             <div class="card card-accent p-5 h-full">
                 <h3 class="text-sm font-bold text-slate-800 mb-3">Why apply online?</h3>
                 <ul class="text-xs text-slate-600 space-y-3">
                     <li class="flex gap-2"><span class="text-green-600 font-bold">✓</span> Save hours at the dealership</li>
                     <li class="flex gap-2"><span class="text-green-600 font-bold">✓</span> Get pre-approved rates privately</li>
                     <li class="flex gap-2"><span class="text-green-600 font-bold">✓</span> No obligation to buy</li>
                 </ul>
                 <div class="mt-auto pt-6">
                    <div class="bg-slate-50 p-3 rounded border border-slate-200 text-center">
                        <div class="text-[10px] text-slate-500 uppercase font-bold">Current Rates From</div>
                        <div class="text-2xl font-extrabold text-blue-700">4.99%</div>
                        <div class="text-[10px] text-slate-400">O.A.C. Conditions apply</div>
                    </div>
                 </div>
             </div>
        </aside>

      </section>

      <section class="card card-accent p-5 mt-4">
        <h3 class="h2 mb-3">Inventory Preview</h3>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            <div class="bg-slate-100 h-24 rounded-lg flex items-center justify-center text-slate-400 font-bold text-xs">Trucks</div>
            <div class="bg-slate-100 h-24 rounded-lg flex items-center justify-center text-slate-400 font-bold text-xs">SUVs</div>
            <div class="bg-slate-100 h-24 rounded-lg flex items-center justify-center text-slate-400 font-bold text-xs">Sedans</div>
            <div class="bg-slate-100 h-24 rounded-lg flex items-center justify-center text-slate-400 font-bold text-xs">EVs</div>
        </div>
      </section>

    </main>
    
    <div id="form-backdrop" class="form-backdrop"></div>

  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const bySelAll = (s) => document.querySelectorAll(s);
    
    // --- Navigation Logic ---
    const steps = ['step-intent', 'step-vehicle-type', 'step-budget', 'step-purchase', 'step-income', 'step-yourinfo', 'step-consent'];
    let currentStepIndex = 0;

    function updateUI() {
        // 1. Hide all steps
        bySelAll('.form-step').forEach(el => el.classList.add('hidden'));
        
        // 2. Show current
        const curId = steps[currentStepIndex];
        const el = document.querySelector(`[data-id="${curId}"]`);
        if(el) el.classList.remove('hidden');

        // 3. Progress Bar
        const pct = ((currentStepIndex) / (steps.length - 2)) * 100;
        $('progress-fill').style.width = Math.min(pct, 100) + '%';
        $('progress-label').innerText = `Step ${currentStepIndex + 1}`;
        
        // 4. Button State
        $('btnBack').style.visibility = currentStepIndex === 0 ? 'hidden' : 'visible';
        $('btnNext').innerText = currentStepIndex === steps.length - 2 ? 'Submit' : 'Next Step';
    }

    function next() {
        if(currentStepIndex < steps.length - 1) {
            currentStepIndex++;
            updateUI();
        }
    }
    
    function back() {
        if(currentStepIndex > 0) {
            currentStepIndex--;
            updateUI();
        }
    }

    $('btnNext').addEventListener('click', next);
    $('btnBack').addEventListener('click', back);

    // --- Selection Logic ---
    bySelAll('[data-intent]').forEach(btn => {
        btn.addEventListener('click', () => {
            bySelAll('[data-intent]').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            $('intent').value = btn.dataset.intent;
            setTimeout(next, 200);
        });
    });

    bySelAll('[data-type]').forEach(btn => {
        btn.addEventListener('click', () => {
            bySelAll('[data-type]').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            $('vehicleType').value = btn.dataset.type;
            setTimeout(next, 200);
        });
    });
    
    bySelAll('[data-trade]').forEach(btn => {
        btn.addEventListener('click', () => {
            bySelAll('[data-trade]').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            $('hasTradeIn').value = btn.dataset.trade;
        });
    });

    // --- Budget Slider ---
    $('biWeeklyRange').addEventListener('input', (e) => {
        $('biWeeklyOut').innerText = e.target.value;
    });

    // --- FOCUS MODE (FIXED) ---
    const shell = $('form-shell');
    const spacer = $('form-spacer');
    const backdrop = $('form-backdrop');
    const closeBtn = $('form-close');
    const trigger = $('form-trigger');

    function openForm() {
        if(shell.classList.contains('form-focused')) return;
        
        spacer.classList.remove('hidden'); // Hold the space in the grid
        shell.classList.add('form-focused'); // Move to fixed center
        backdrop.classList.add('active'); // Show blurry background
        closeBtn.classList.remove('hidden'); // Show close button
        trigger.classList.add('hidden'); // Remove trigger so we can click inputs
        
        // NOTE: We do NOT blur the main content via JS anymore 
        // because that breaks position:fixed.
    }

    function closeForm() {
        shell.classList.remove('form-focused');
        backdrop.classList.remove('active');
        closeBtn.classList.add('hidden');
        trigger.classList.remove('hidden');
        
        setTimeout(() => {
            spacer.classList.add('hidden');
        }, 300);
    }

    // Triggers
    $('navApplyBtn').addEventListener('click', openForm);
    trigger.addEventListener('click', openForm);
    closeBtn.addEventListener('click', closeForm);
    backdrop.addEventListener('click', closeForm);

    // Init
    updateUI();
  </script>
</body>
</html>
