<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>Vancouver Island Credit | Auto Approvals Online — Work with Blake</title>

  <meta name="description" content="Fast, confidential auto approvals across Vancouver Island & BC. New & used options. Delivery to your door. Work 1 on 1 with Blake Stolth — no call centres." />
  <link rel="canonical" href="https://vancouverislandcredit.ca/"/>
  <meta property="og:title" content="Vancouver Island Credit — Auto Approvals Online"/>
  <meta property="og:description" content="Get approved online. New & used options across Vancouver Island & BC. Delivery to your door. Work directly with Blake."/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://vancouverislandcredit.ca/"/>
  <meta property="og:image" content="https://vancouverislandcredit.ca/0041B99D-D49A-4024-AA7A-2786A4605342.jpg"/>
  <meta name="theme-color" content="#2A5D9F"/>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --blue-600:#2A5D9F; --blue-700:#214B80; --blue-100:#EAF1FB; --blue-grad:#4C7CC0;
      --fs-h1: 22px; --fs-h2: 18px; --fs-body: 13px; --fs-label: 11px; --fs-cta: 13px; --nav-font: 15px;
      --radius: 10px; --gap: 8px;
    }
    @media (max-width:1023px){ :root{ --nav-font: 14px; } }

    html, body { height:100%; }
    body{ font-family:'Inter',sans-serif; background:#f6f7fb; -webkit-font-smoothing:antialiased; margin:0; color:#0f172a; }
    .card{ background:#fff; border-radius:12px; border:1px solid #e5e7eb; box-shadow:0 8px 18px -10px rgb(0 0 0 / .15); }
    .h1{ font-size:var(--fs-h1); font-weight:800; }
    .h2{ font-size:var(--fs-h2); font-weight:800; }
    .label{ font-size:var(--fs-label); color:#3f3f46; font-weight:600; }

    .form-input,.form-select{ background:#f3f4f6; color:#111827; border:1.5px solid #e5e7eb; font-size:var(--fs-body);
      width:100%; padding:6px 10px; border-radius:var(--radius); transition:.15s; }
    .form-input:focus,.form-select:focus{ background:#fff; border-color:var(--blue-600); box-shadow:0 0 0 3px rgba(42,93,159,.15); outline:none; }
    .cta-button{ background:var(--blue-600); color:#fff; font-weight:800; padding:.5rem .8rem; border-radius:.6rem; font-size:var(--fs-cta); }
    .cta-button:hover{ background:var(--blue-700); }

    .tile{ display:flex; align-items:center; justify-content:center; border-radius:10px; border:1.5px solid #e5e7eb; background:#fff;
      font-weight:800; color:#111827; font-size:13px; padding:.45rem; transition:.15s; text-align:center; }
    .tile:hover{ border-color:var(--blue-600); background:#f5f8ff; }
    .tile.selected{ border-color:var(--blue-600); background:#eef4ff; box-shadow:inset 0 0 0 2px var(--blue-600); }

    /* Header brand with powered-by line tucked under title */
    .brand-left{ display:flex; align-items:center; gap:12px; }
    .site-logo{ height:56px; width:auto; object-fit:contain; display:block; }
    .brand-title{ color:#0f172a; font-weight:800; letter-spacing:-0.01em; font-size:var(--nav-font); text-decoration:none; line-height:1; }
    .brand-stack{ display:flex; flex-direction:column; gap:4px; }
    .powered-by{ display:flex; align-items:center; gap:6px; font-size:calc(var(--nav-font) * .85); line-height:1; color:#475569; font-weight:700; }
    .equifax-mini{ height:1em; width:auto; object-fit:contain; transform:translateY(1px); }

    /* Sticky, no-growth nav */
    .nav{ background:#fff; border:1px solid #e5e7eb; }

    /* Two-column full-height main; no page scroll on desktop */
    .viewport { height: calc(100vh - 92px); max-height: calc(100vh - 92px); overflow: hidden; }
    @media (max-width:1023px){ .viewport{ height:auto; max-height:none; } } /* On tablets/phones allow normal flow */

    .pane { height:100%; overflow:hidden; display:flex; flex-direction:column; }
    .pane-body { padding:10px; overflow:hidden; flex:1 1 auto; }

    /* Login block */
    .login-form .row{ display:grid; grid-template-columns: 1.4fr 1.4fr auto; gap:8px; }
    .login-form small a{ text-decoration:underline; color:#2A5D9F; }

    /* Form shell */
    .form-shell{ height:100%; display:flex; flex-direction:column; overflow:hidden; }
    .form-head{ padding:10px 12px; border-bottom:1px solid #e5e7eb; }
    .progress{ height:6px; background:#e5e7eb; border-radius:9999px; overflow:hidden; }
    .fill{ height:6px; width:0%; background:linear-gradient(90deg,var(--blue-600),var(--blue-grad)); transition:width .25s ease; }

    .steps-viewport{ padding:10px; overflow:hidden; flex:1 1 auto; display:flex; }
    .step-inner{ width:100%; display:flex; flex-direction:column; gap:8px; }
    .grid-2{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:8px; }
    .grid-3{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:8px; }
    .grid-4{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:8px; }

    .inline-2{ display:grid; grid-template-columns: 1fr 1fr; gap:8px; }
    .inline-3{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px; }
    .inline-4{ display:grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap:8px; }
    .inline-5{ display:grid; grid-template-columns: 1fr 1fr 1fr 1fr 1fr; gap:8px; }

    .help{ font-size:11px; color:#64748b; }

    .form-foot{ padding:8px 12px; display:flex; justify-content:space-between; align-items:center; border-top:1px solid #e5e7eb; }

    .err{ border-color:#ef4444 !important; } .err-label{ color:#ef4444 !important; }

    /* Sections for marketing content: hidden on desktop to preserve no-scroll */
    @media (min-width:1024px){
      .lg-hidden{ display:none !important; }
    }
  </style>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"AutoDealer",
    "name":"Vancouver Island Credit",
    "telephone":"+1-236-969-2424",
    "address":{"@type":"PostalAddress","streetAddress":"525 Gorge Rd E","addressLocality":"Victoria","addressRegion":"BC","postalCode":"V8T 4T2","addressCountry":"CA"},
    "areaServed":"British Columbia, Canada",
    "image":"https://vancouverislandcredit.ca/0041B99D-D49A-4024-AA7A-2786A4605342.jpg",
    "url":"https://vancouverislandcredit.ca",
    "slogan":"Get approved online. Delivery across BC. Work directly with Blake.",
    "founder":{"@type":"Person","name":"Blake Stolth"},
    "makesOffer":[{"@type":"Offer","itemOffered":{"@type":"Service","name":"Auto Financing (New & Used)"}}]
  }
  </script>
</head>
<body class="h-full">
  <!-- HEADER -->
  <header class="max-w-6xl mx-auto px-4 pt-4">
    <nav class="nav card px-4 sm:px-6 py-2.5 flex items-center justify-between">
      <div class="brand-left">
        <img src="Logo.png" alt="Vancouver Island Credit logo" class="site-logo"/>
        <div class="brand-stack">
          <a href="#" class="brand-title" aria-label="Vancouver Island Credit — Home">Vancouver Island Credit</a>
          <div class="powered-by">
            <span>Powered by</span>
            <img src="Equifax.png" alt="Equifax" class="equifax-mini">
          </div>
        </div>
      </div>
      <div class="hidden sm:flex items-center gap-6 font-semibold text-zinc-700 text-[var(--nav-font)]">
        <a href="#why" class="hover:text-[var(--blue-600)]">About</a>
        <a href="#contact" class="hover:text-[var(--blue-600)]">Contact</a>
      </div>
    </nav>
  </header>

  <!-- MAIN (no scroll desktop) -->
  <main class="max-w-6xl mx-auto px-4 pt-3 viewport">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-3 h-full">
      <!-- LEFT: LOGIN -->
      <section class="pane">
        <div class="card pane-body">
          <h2 class="h2 mb-1">Log in to check your options</h2>
          <p class="help mb-2">Use your application number and password to view matching vehicles.</p>
          <form id="login-form" class="login-form">
            <div class="row">
              <div>
                <label class="label mb-1 block" for="loginCode">Application Number</label>
                <input id="loginCode" class="form-input uppercase" placeholder="ABC1234" maxlength="12" />
              </div>
              <div>
                <label class="label mb-1 block" for="loginPass">Password</label>
                <input id="loginPass" type="password" class="form-input" placeholder="••••••••" />
              </div>
              <div class="flex items-end">
                <button type="submit" class="cta-button w-full">Log In</button>
              </div>
            </div>
            <small class="help mt-2">Forgot password? <a href="#">Reset</a></small>
          </form>

          <!-- MOBILE marketing (hidden on desktop to keep no-scroll) -->
          <hr class="my-3 border-zinc-200 lg-hidden">
          <div id="why" class="lg-hidden">
            <h3 class="h2 mb-1">Why people pick us</h3>
            <ul class="text-[12px] text-zinc-700 space-y-1">
              <li><b>All credit welcome</b> — high approval rates.</li>
              <li><b>Bigger selection</b> — new & used across BC.</li>
              <li><b>Private</b> — no call centres, work with Blake.</li>
              <li><b>Delivery</b> — right to your door.</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- RIGHT: FORM -->
      <section class="pane">
        <div class="form-shell card">
          <!-- head -->
          <div class="form-head">
            <div class="flex justify-between items-center">
              <div id="progress-label" class="text-[11px] font-semibold text-zinc-700">Step 1 of 8</div>
              <div id="progress-endcap" class="text-[11px] text-[var(--blue-700)] font-semibold">Let’s get you approved</div>
            </div>
            <div class="progress mt-2"><div id="progress-fill" class="fill"></div></div>
          </div>

          <!-- steps -->
          <div id="step-viewport" class="steps-viewport">
            <form id="the-form" name="lead-form" method="POST" data-netlify="true" data-netlify-honeypot="bot-field" action="/thank-you.html" class="flex-1" novalidate>
              <input type="hidden" name="form-name" value="lead-form"/>
              <input type="hidden" name="app_type" id="app_type" value="Full Application" />
              <p class="hidden" aria-hidden="true"><label>Don’t fill this out: <input name="bot-field"/></label></p>

              <!-- STEP 1: Bi-weekly budget (ranges start at 120) -->
              <section class="form-step" data-step="1">
                <div class="step-inner">
                  <h3 class="h2">Bi-weekly budget</h3>
                  <p class="help -mt-1">Pick the closest range. Starts at $120.</p>
                  <div class="grid-4">
                    <label class="tile cursor-pointer"><input type="radio" class="sr-only" name="bwRange" value="$120–$160" required><span>$120–$160</span></label>
                    <label class="tile cursor-pointer"><input type="radio" class="sr-only" name="bwRange" value="$161–$220" required><span>$161–$220</span></label>
                    <label class="tile cursor-pointer"><input type="radio" class="sr-only" name="bwRange" value="$221–$300" required><span>$221–$300</span></label>
                    <label class="tile cursor-pointer"><input type="radio" class="sr-only" name="bwRange" value="$301+" required><span>$301+</span></label>
                  </div>
                </div>
              </section>

              <!-- STEP 2: Condition -->
              <section class="form-step hidden" data-step="2">
                <div class="step-inner">
                  <h3 class="h2">New or used?</h3>
                  <div class="grid-3">
                    <button type="button" class="tile" data-cond="New">New</button>
                    <button type="button" class="tile" data-cond="Used">Used</button>
                    <button type="button" class="tile" data-cond="Both">Both</button>
                  </div>
                  <input type="hidden" id="vehicleCondition" name="vehicleCondition" required>
                </div>
              </section>

              <!-- STEP 3: Purchase details -->
              <section class="form-step hidden" data-step="3" id="step-purchase">
                <div class="step-inner">
                  <h3 class="h2">Purchase details</h3>
                  <div class="inline-2">
                    <div>
                      <label class="label mb-1 block" for="downPayment">Down payment</label>
                      <select id="downPayment" name="downPayment" class="form-select">
                        <option value="">Select…</option>
                        <option>$3,000+</option>
                        <option>$1,000–$3,000</option>
                        <option>$0–$1,000</option>
                      </select>
                    </div>
                    <div>
                      <label class="label mb-1 block" for="hasTradeIn">Trade-in</label>
                      <select id="hasTradeIn" name="hasTradeIn" class="form-select">
                        <option>No</option>
                        <option>Yes</option>
                      </select>
                    </div>
                  </div>

                  <!-- Trade-in details: one line -->
                  <div id="tradeInDetails" class="hidden">
                    <div class="inline-5 mt-1">
                      <input type="number" name="tradeInYear" placeholder="Year" class="form-input" inputmode="numeric" min="2000" max="2025"/>
                      <input type="text" name="tradeInMake" placeholder="Make" class="form-input" maxlength="40"/>
                      <input type="text" name="tradeInModel" placeholder="Model" class="form-input" maxlength="50"/>
                      <input type="number" name="tradeInKms" placeholder="KM" class="form-input" inputmode="numeric" min="0" max="1000000"/>
                      <input type="text" name="tradeInOwed" placeholder="Money owed" class="form-input" maxlength="20"/>
                    </div>
                  </div>
                </div>
              </section>

              <!-- STEP 4: Employment + income -->
              <section class="form-step hidden" data-step="4" id="step-income">
                <div class="step-inner">
                  <h3 class="h2">Employment & income</h3>
                  <div class="inline-2">
                    <div>
                      <label class="label mb-1 block" for="incomeSourceFull">Employment type</label>
                      <select id="incomeSourceFull" name="incomeSourceFull" class="form-select" required>
                        <option value="">Select…</option>
                        <option>Full-Time</option>
                        <option>Part-Time</option>
                        <option>Self-Employed</option>
                        <option>Disability</option>
                        <option>Other</option>
                      </select>
                    </div>
                    <div>
                      <label class="label mb-1 block" for="avgMonthlyIncome">Monthly income (pre-tax)</label>
                      <input id="avgMonthlyIncome" name="avgMonthlyIncome" class="form-input" placeholder="$4,000" inputmode="numeric" maxlength="16" required/>
                    </div>
                  </div>
                </div>
              </section>

              <!-- STEP 5: Account creation + contact -->
              <section class="form-step hidden" data-step="5" id="step-account">
                <div class="step-inner">
                  <h3 class="h2">Account creation</h3>
                  <p class="help -mt-1">After finish, you’ll get an <b>application code</b>. That code becomes your username to log in.</p>
                  <div class="inline-3">
                    <div>
                      <label class="label mb-1 block" for="email">Email</label>
                      <input id="email" name="email" type="email" class="form-input" placeholder="you@email.com" required/>
                    </div>
                    <div>
                      <label class="label mb-1 block" for="phone">Phone</label>
                      <input id="phone" name="phone" type="tel" class="form-input" placeholder="(250) 555-1234" maxlength="14" required/>
                    </div>
                    <div>
                      <label class="label mb-1 block" for="password">Password</label>
                      <input id="password" name="password" type="password" class="form-input" placeholder="Create password" required/>
                    </div>
                  </div>
                </div>
              </section>

              <!-- STEP 6: Name + DOB -->
              <section class="form-step hidden" data-step="6" id="step-yourinfo">
                <div class="step-inner">
                  <h3 class="h2">Your info</h3>
                  <div class="inline-3">
                    <div><label class="label mb-1 block" for="firstName">First name</label><input id="firstName" name="firstName" class="form-input" required/></div>
                    <div><label class="label mb-1 block" for="middleName">Middle name(s)</label><input id="middleName" name="middleName" class="form-input"/></div>
                    <div><label class="label mb-1 block" for="lastName">Last name</label><input id="lastName" name="lastName" class="form-input" required/></div>
                  </div>
                  <div class="inline-3">
                    <div>
                      <label class="label mb-1 block">Year</label>
                      <select id="dobYear" name="dobYear" class="form-select" required><option value="">YYYY</option></select>
                    </div>
                    <div>
                      <label class="label mb-1 block">Month</label>
                      <select id="dobMonth" name="dobMonth" class="form-select" required><option value="">MM</option></select>
                    </div>
                    <div>
                      <label class="label mb-1 block">Day</label>
                      <select id="dobDay" name="dobDay" class="form-select" required><option value="">DD</option></select>
                    </div>
                  </div>
                </div>
              </section>

              <!-- STEP 7: Current address -->
              <section class="form-step hidden" data-step="7" id="step-address">
                <div class="step-inner">
                  <h3 class="h2">Current address</h3>
                  <div class="inline-2">
                    <input id="currentStreetAddress" name="currentStreetAddress" class="form-input" placeholder="Street address" required/>
                    <input id="currentUnit" name="currentUnit" class="form-input" placeholder="Unit #"/>
                  </div>
                  <div class="inline-3">
                    <input id="currentCity" name="currentCity" class="form-input" placeholder="City" required/>
                    <select id="currentProvince" name="currentProvince" class="form-select" required><option value="">Prov</option></select>
                    <input id="currentPostalCode" name="currentPostalCode" class="form-input" placeholder="Postal code"/>
                  </div>
                  <div class="inline-3">
                    <input id="housingPayment" name="housingPayment" class="form-input" placeholder="Monthly payments" inputmode="numeric" required/>
                    <input id="addrDuration" name="addrDuration" class="form-input" placeholder="Duration (yrs/mo)" />
                    <div>
                      <label class="label mb-1 block">Rent / Own</label>
                      <div class="grid-2">
                        <button type="button" class="tile" id="btnRent" aria-pressed="true">Rent</button>
                        <button type="button" class="tile" id="btnOwn" aria-pressed="false">Own</button>
                      </div>
                      <input type="hidden" id="housingType" name="housingType" value="Rent" />
                    </div>
                  </div>
                </div>
              </section>

              <!-- STEP 8: Employer + optional additional income -->
              <section class="form-step hidden" data-step="8" id="step-employer">
                <div class="step-inner">
                  <h3 class="h2">Employment details</h3>
                  <div class="inline-2">
                    <input id="currentEmployer" name="currentEmployer" class="form-input" placeholder="Employer" required/>
                    <input id="jobTitle" name="jobTitle" class="form-input" placeholder="Position" required/>
                  </div>
                  <div class="inline-2">
                    <select id="timeWithEmployerYears" name="timeWithEmployerYears" class="form-select"><option value="">Years</option></select>
                    <select id="timeWithEmployerMonths" name="timeWithEmployerMonths" class="form-select"><option value="">Months</option></select>
                  </div>

                  <div class="mt-1">
                    <label class="label mb-1 block">Optional additional income</label>
                    <div class="inline-2">
                      <input id="otherIncomeSource" name="otherIncomeSource" class="form-input" placeholder="Type (e.g., child tax, tips)"/>
                      <input id="otherIncomeAmount" name="otherIncomeAmount" class="form-input" placeholder="How much per month" inputmode="numeric"/>
                    </div>
                  </div>

                  <p class="help mt-1">By continuing, you give Vancouver Island Credit permission to review credit to find exact matches.</p>
                </div>
              </section>

            </form>
          </div>

          <!-- foot -->
          <div class="form-foot">
            <button type="button" id="btnBack" class="text-[12px] font-semibold text-zinc-600 hover:text-zinc-900 px-2 py-1 disabled:opacity-30">Back</button>
            <button type="button" id="btnNext" class="cta-button">Next</button>
          </div>
        </div>
      </section>
    </div>

    <!-- MOBILE-ONLY extras to mirror original site sections; hidden on desktop -->
    <section id="inventory" class="card p-5 mt-3 lg-hidden">
      <div class="flex items-center justify-between mb-2">
        <h3 class="h2">Browse by Vehicle Type</h3>
        <span class="text-[12px] font-semibold text-[var(--blue-600)]">(examples)</span>
      </div>
      <div class="grid grid-cols-2 gap-3 mt-2">
        <div class="tile">Coupe</div>
        <div class="tile">Hatchback / Wagon</div>
        <div class="tile">Electric / Hybrid</div>
        <div class="tile">Sedan</div>
        <div class="tile">Crossover</div>
        <div class="tile">SUV</div>
        <div class="tile">Van</div>
        <div class="tile">Truck</div>
      </div>
    </section>

    <section id="map" class="card p-0 mt-3 overflow-hidden lg-hidden">
      <div class="px-4 py-3">
        <h3 class="h2">Head Office — Victoria, BC</h3>
        <p class="text-[12px] text-zinc-600 mt-1">Real location. Real people. No call centres.</p>
      </div>
      <iframe
        class="w-full border-0"
        style="height:200px"
        title="Map — Vancouver Island Credit"
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
        src="https://www.google.com/maps?q=Victoria,BC&z=11&output=embed">
      </iframe>
      <div class="px-4 py-3 text-[12px] text-zinc-600 border-t">
        525 Gorge Rd E, Victoria, BC V8T 4T2
      </div>
    </section>

    <footer id="contact" class="text-center text-[11px] text-zinc-500 pt-3 pb-6 lg-hidden">
      <p class="font-semibold text-zinc-600">Vancouver Island Credit</p>
      <p>525 Gorge Rd E, Victoria, BC V8T 4T2</p>
      <p><a href="tel:2369692424" class="hover:text-[var(--blue-600)] transition-colors">Customer service: 236-969-2424</a></p>
      <p class="pt-1">Serving Vancouver Island & British Columbia • Delivery available province-wide</p>
      <p class="mt-1">© <span id="year"></span> Vancouver Island Credit • All rights reserved</p>
    </footer>
  </main>

  <script>
    // Helpers
    const $ = (id) => document.getElementById(id);
    const bySel = (s, root=document) => root.querySelector(s);
    const bySelAll = (s, root=document) => Array.from(root.querySelectorAll(s));

    // ===== Progress / Step control (no submit button anywhere) =====
    const steps = () => bySelAll('.form-step');
    function showStep(n){
      const s = steps();
      s.forEach(x=> x.classList.add('hidden'));
      const t = s[n-1];
      if (t){ t.classList.remove('hidden'); window.__currentStep = n; }
      const total = s.length;
      $('btnBack').disabled = (n === 1);
      $('btnNext').textContent = 'Next'; // always "Next"
      bySel('#progress-label').textContent = 'Step ' + n + ' of ' + total;
      const pct = Math.round((n-1)/(total-1)*100);
      bySel('#progress-endcap').textContent = (n === total) ? 'Finding exact matches…' : 'Let’s get you approved';
      bySel('#progress-fill').style.width = pct + '%';
    }
    function visibleRequiredIn(stepEl){
      const req = stepEl.querySelectorAll('[required]');
      return Array.from(req);
    }
    function validateStep(n){
      const stepEl = steps()[n-1];
      if(!stepEl) return true;
      let ok = true;
      visibleRequiredIn(stepEl).forEach(el => {
        let pass = (el.type==='checkbox') ? el.checked : (el.value && el.value.trim()!=='');
        if (el.id==='phone') pass = el.value.replace(/\D/g,'').length>=10;
        if (el.type==='email' || el.id==='email'){ const v=el.value.trim(); pass = pass && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v); }
        if (!pass){ ok=false; el.classList.add('err'); const lab = stepEl.querySelector('label[for="'+el.id+'"]'); lab?.classList.add('err-label'); }
        else { el.classList.remove('err'); const lab = stepEl.querySelector('label[for="'+el.id+'"]'); lab?.classList.remove('err-label'); }
      });
      return ok;
    }
    function next(delta){
      const cur = window.__currentStep || 1;
      if (delta>0 && !validateStep(cur)) return;
      let t = cur + delta;
      const total = steps().length;
      if (t < 1) t = 1;
      if (t > total) { submitForm(); return; } // auto-submit after last "Next"
      showStep(t);
    }
    $('btnNext').addEventListener('click', ()=> next(1));
    $('btnBack').addEventListener('click', ()=> next(-1));

    // ===== Login (placeholder only) =====
    $('login-form')?.addEventListener('submit', (e)=>{
      e.preventDefault();
      const code = $('loginCode').value.trim();
      const pass = $('loginPass').value.trim();
      if(!code || !pass) return;
      try { sessionStorage.setItem('app_code', code.toUpperCase()); } catch(_) {}
      alert('Logged in (demo). You would see your matches here.');
    });

    // ===== Interactions =====
    // Budget: click tile checks radio
    bySelAll('label.tile > input[type="radio"]').forEach(r=>{
      const parent = r.parentElement;
      parent.addEventListener('click', ()=> { r.checked = true; bySelAll('label.tile').forEach(x=>x.classList.remove('selected')); parent.classList.add('selected'); });
    });

    // Condition selection
    bySelAll('[data-cond]').forEach(b=> b.addEventListener('click', ()=>{
      $('vehicleCondition').value = b.dataset.cond;
      bySelAll('[data-cond]').forEach(x=>x.classList.remove('selected'));
      b.classList.add('selected');
      next(1);
    }));

    // Trade-in reveal
    $('hasTradeIn')?.addEventListener('change', (e)=>{
      bySel('#tradeInDetails').classList.toggle('hidden', e.target.value.toLowerCase()!=='yes');
    });

    // Rent/Own toggle
    function setHousing(type){
      $('housingType').value = type;
      $('btnRent').setAttribute('aria-pressed', String(type==='Rent'));
      $('btnOwn').setAttribute('aria-pressed', String(type==='Own'));
      ['btnRent','btnOwn'].forEach(id => $(id).classList.remove('selected'));
      if(type==='Rent') $('btnRent').classList.add('selected'); else $('btnOwn').classList.add('selected');
    }
    $('btnRent')?.addEventListener('click', ()=> setHousing('Rent'));
    $('btnOwn')?.addEventListener('click', ()=> setHousing('Own'));

    // Phone mask
    $('phone')?.addEventListener('input', (e)=>{
      const d=e.target.value.replace(/\D/g,'').slice(0,10);
      if(d.length>6)e.target.value=`(${d.slice(0,3)}) ${d.slice(3,6)}-${d.slice(6)}`;
      else if(d.length>3)e.target.value=`(${d.slice(0,3)}) ${d.slice(3)}`;
      else if(d.length>0)e.target.value=`(${d}`;
    });

    // DOB dropdowns
    function populateMonths(sel){ if(!sel) return; const m=["01","02","03","04","05","06","07","08","09","10","11","12"]; m.forEach((mm,i)=>{ const o=document.createElement('option'); o.value=i+1; o.textContent=mm; sel.appendChild(o);}); }
    function updateDays(){
      const y=parseInt($('dobYear').value||'',10);
      const m=parseInt($('dobMonth').value||'',10);
      const sel=parseInt($('dobDay').value||'',10);
      const days=(y&&m)?new Date(y,m,0).getDate():31;
      $('dobDay').innerHTML='<option value="">DD</option>';
      for(let i=1;i<=days;i++){ const o=document.createElement('option'); o.value=i; o.textContent=String(i).padStart(2,'0'); $('dobDay').appendChild(o);}
      if(sel&&sel<=days)$('dobDay').value=sel;
    }
    function populateYears(start=2004, end=1900){
      const sel=$('dobYear'); if(!sel) return;
      sel.innerHTML='<option value="">YYYY</option>';
      for(let y=start; y>=end; y--){ const o=document.createElement('option'); o.value=y; o.textContent=y; sel.appendChild(o); }
    }
    function populateProvinces(sel){ if(!sel) return; const prov=["AB","BC","MB","NB","NL","NS","NT","NU","ON","PE","QC","SK","YT"]; sel.innerHTML='<option value="">Prov</option>'; prov.forEach(p=>{ const o=document.createElement('option'); o.value=p; o.textContent=p; sel.appendChild(o); }); }
    function populateDropdown(sel,start,end,label){ if(!sel) return; sel.innerHTML='<option value="">'+label+'</option>'; for(let i=start;i<=end;i++){ const o=document.createElement('option'); o.value=i; o.textContent=i; sel.appendChild(o);} }

    // ===== Auto-submit after final Next =====
    async function submitForm(){
      // Validate all steps to be safe
      let ok = true;
      for (let i=1;i<=steps().length;i++){ if(!validateStep(i)) ok=false; }
      if(!ok){ // jump to first invalid
        for (let i=1;i<=steps().length;i++){ if(!validateStep(i)){ showStep(i); break; } }
        return;
      }

      // Generate application code: ABC + 4 digits
      const code = 'ABC' + Math.floor(1000 + Math.random()*9000).toString();
      try { sessionStorage.setItem('app_code', code); } catch(_) {}

      // Post (Netlify style); append code and condition
      const fd = new FormData(bySel('#the-form'));
      fd.append('appCode', code);
      const cond = bySel('#vehicleCondition')?.value || '';
      fd.append('vehicleCondition', cond);

      try {
        await fetch('/', {
          method:'POST',
          headers:{'Content-Type':'application/x-www-form-urlencoded'},
          body:new URLSearchParams(fd).toString()
        });
      } catch(e){ /* ignore for demo */ }

      const url = new URL('/thank-you.html', window.location.origin);
      url.searchParams.set('code', code);
      window.location.href = url.toString();
    }

    // ===== Init =====
    (function init(){
      // Steps
      window.__currentStep = 1; showStep(1);

      // DOB
      populateYears(2004, 1900);
      populateMonths($('dobMonth')); updateDays();
      $('dobMonth').addEventListener('change', updateDays);
      $('dobYear').addEventListener('change', updateDays);

      // Province + tenure dropdowns
      populateProvinces($('currentProvince'));
      populateDropdown($('timeWithEmployerYears'), 0, 30, 'Years');
      populateDropdown($('timeWithEmployerMonths'), 0, 11, 'Months');

      // Keep housing default
      setHousing('Rent');

      // Year in footer (mobile)
      const y = new Date().getFullYear(); const yf = document.getElementById('year'); if(yf) yf.textContent = y;
    })();
  </script>
</body>
</html>
